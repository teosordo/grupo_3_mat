<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../includes/head')%>
    <% styles.forEach(style => { %>
        <link rel="stylesheet" href="/css/<%= style %> ">
    <% }) %>
    <link rel="stylesheet" href="/css/users/userEdit.css">
    <title>Editar datos</title>
</head>
<body>
    <%- include('../includes/header') %>
    <main>
        <section id="contenido">
            <h2>Hola <%=user.firstName%>! Editá tus datos:</h2>
            <p>Necesitarás ingresar tu contraseña actual y repetirla para poder efectuar cualquier cambio.</p>
            <form action="/users/update/<%=user.id%>?_method=PUT" method="POST" enctype="multipart/form-data" id="useredit">
                <fieldset class="fieldset-small">
                    <label for="firstName">Nombre:
                        <section id="errorFirstName">
                            <p class="errors"></p>
                        <% if (locals.errors && errors.firstName) { %>
                            <p class="errors"><%= errors.firstName.msg%></p>
                        <% } %>
                        </section>
                        <input type="text" name="firstName" id="firstName" class="container-user" value="<%=user.firstName%>">
                    </label>
                    <label for="lastName">Apellido:
                        <section id="errorLastName">
                            <p class="errors"></p>
                        <% if (locals.errors && errors.lastName) { %>
                            <p class="errors"><%= errors.lastName.msg%></p>
                        <% } %>
                        </section>
                        <input type="text" name="lastName" id="lastName" class="container-user" value="<%=user.lastName%>">
                    </label>
                    <label for="username">Nombre de usuario:
                        <section id="errorUsername">
                            <p class="errors"></p>
                        <% if (locals.errors && errors.username) { %>
                            <p class="errors"><%= errors.username.msg%></p>
                        <% } %>
                        </section>
                        <input type="text" name="username" id="username" class="container-user" value="<%=user.username%>">
                    </label>
                    <label for="email">Email:
                        <section id="errorEmail">
                            <p class="errors"></p>
                        <% if (locals.errors && errors.email) { %>
                            <p class="errors"><%= errors.email.msg%></p>
                        <% } %>
                        </section>
                        <input type="email" name="email" id="email" class="container-user" value="<%=user.email%>">
                    </label>
                    <label for="password">Contraseña:
                        <section id="errorPassword">
                            <p class="errors"></p>
                        <% if (locals.errors && errors.password) { %>
                            <p class="errors"><%= errors.password.msg%></p>
                        <% } %>
                        </section>
                        <input type="password" id="password" name="password" class="container-user">
                    </label>
                    <label for="passwordConfirm">Vuelva a ingresar su contraseña:
                        <section id="errorPasswordCheck">
                            <p class="errors"></p>
                        <% if (locals.errors && errors.passwordConfirm) { %>
                            <p class="errors"><%= errors.passwordConfirm.msg%></p>
                        <% } %>
                        </section>
                        <input type="password" id="passwordConfirm" name="passwordConfirm" class="container-user">
                    </label>
                    <label>Avatar: 
                        <legend>
                            <img src="/uploads/users/<%=user.avatar%>" alt="" id="avatar-user">
                        </legend>
                    </label>
                    <label for="avatar"> Nuevo avatar: 
                        <section id="errorAvatar">
                            <p class="errors"></p>
                        <% if (locals.errors && errors.avatar) { %>
                            <p class="errors"><%= errors.avatar.msg%></p>
                        <% } %>
                        </section>
                        <input type="file" name="avatar" id="avatar" class="container-user" onChange="return avatar.value"> <!--accept="image/jpeg, image/png, image/jpg"-->
                    </label>
                    <button type="submit" id="button-submit">Editar</button>
                </fieldset>
            </form>

            <form action="/users/delete/<%=users.id%>" method="POST">
                <fieldset class="fieldset-small">
                    <button type="submit" id="delete-button">Eliminar</button>
                </fieldset>
            </form>
            <button type="button" id="button-link-redirect">
                <a href="../profile">Cancelar</a>
            </button>
        </section>
    </main>
    <%-include('../includes/footer') %> 
    <script src="/js/formValidators/userEdit.js"></script>
</body>
</html>